<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Tibor Pilz">
  <title>CSS Houdini</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4.0.2/dist/reset.css">
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4.0.2/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="https://unpkg.com/reveal.js@4.0.2/dist/theme/beige.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">CSS Houdini</h1>
  <p class="author">Tibor Pilz</p>
  <p class="date">05.10.2020</p>
</section>

<section class="slide level2">

<style>
    h1 {
        font-size: 64px !important;
    }
    h2 {
        font-size: 48px !important;
    }
    p {
        font-size: 24px !important;
    }
    li {
        line-height: 0.9 !important;
        margin-top: 0.5em !important;
    }
</style>
</section>
<section id="css-houdini" class="title-slide slide level1">
<h1>CSS Houdini</h1>
<ol type="1">
<li class="fragment">Einführung</li>
<li class="fragment">Bestandteile</li>
<li class="fragment">Beispiele</li>
</ol>
</section>

<section id="css-houdini-ist" class="title-slide slide level1">
<h1>CSS Houdini ist:</h1>
<ul>
<li class="fragment">Sammlung von low-level APIs, die Teile der CSS Engine freilegen</li>
<li class="fragment">Nicht production-ready - Grösstenteils unterstützt in Chrome, Edge, Opera</li>
<li class="fragment">Nicht unterstützt in Firefox und Safari</li>
</ul>
<p><span class="citation" data-cites="mdnCSSHoudini">(MDN n.d.)</span> ##</p>
<iframe src="https://ishoudinireadyyet.com" style="width: 1200px; height: 100vh; margin-top: -200px">
</iframe>
<p><span class="citation" data-cites="HoudiniReady">(https://ishoudinireadyyet.com n.d.)</span></p>
</section>

<section id="bestandteile" class="title-slide slide level1">
<h1>Bestandteile</h1>
<ol type="1">
<li class="fragment">CSS Parser API</li>
<li class="fragment">CSS Typed OM</li>
<li class="fragment">CSS Properties and Values API</li>
<li class="fragment">CSS Painting API</li>
<li class="fragment">Worklets</li>
<li class="fragment">CSS Layout API</li>
<li class="fragment">CSS Animation API</li>
</ol>
</section>

<section id="css-parser-api" class="title-slide slide level1">
<h1>CSS Parser API</h1>
<ul>
<li class="fragment">Eine API, die den CSS Parser erweitert und zugaenglicher macht</li>
<li class="fragment">Zur Zeit in keinem Browser unterstützt</li>
<li class="fragment">Keine Spezifikation verfügbar</li>
<li class="fragment"><em>aber</em> - die Idee ist gut.</li>
</ul>
</section>

<section>
<section id="das-css-typed-object-model" class="title-slide slide level1">
<h1>Das CSS Typed Object Model</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a>  <span class="kw">const</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;test-element&#39;</span>) el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">opacity</span> <span class="op">=</span> <span class="fl">0.3</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a>  el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">fontSize</span> <span class="op">=</span> <span class="st">&#39;24px&#39;</span></span></code></pre></div>
<ul>
<li class="fragment">CSS hat ein object model (CSSOM) <span class="citation" data-cites="mdnCSSObjectModel">(MDN 2020)</span></li>
<li class="fragment">Der Zugriff erfolgt ueber das <code>style</code>-Attribut</li>
</ul>
</section>
<section id="probleme-des-cssoms" class="slide level2">
<h2>Probleme des CSSOMs</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="kw">typeof</span> el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">opacity</span>) <span class="co">// &#39;string&#39;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a>  el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">opacity</span> <span class="op">+=</span> <span class="fl">0.1</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a>  <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">opacity</span>) <span class="co">// &#39;0.30.1&#39; - wat</span></span></code></pre></div>
<ul>
<li class="fragment">Diese Attribute sind <em>immer</em> Strings.</li>
</ul>
</section>
<section id="probleme-des-cssoms-zweiter-teil" class="slide level2">
<h2>Probleme des CSSOMs, zweiter Teil</h2>
<aside class="notes">
<p>Darueber hinaus ist die Arbeit mit CSS-Einheiten wie z.B. ‘px’ sehr anstrengend. An diesem Beispiel zeigt sich, dass auch beim Zurueckrechnen strikt an das ‘px’ - Suffix gedacht werden muss.</p>
</aside>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="kw">const</span> { fontSize<span class="op">,</span> opacity } <span class="op">=</span> footer<span class="op">.</span><span class="at">style</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a><span class="kw">const</span> parsedFontSize <span class="op">=</span> <span class="pp">parseFloat</span>(fontSize)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">fontSize</span> <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span>parsedFontSize <span class="op">+</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">px`</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true"></a><span class="kw">const</span> parsedOpacity <span class="op">=</span> <span class="pp">parseFloat</span>(opacity)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true"></a>el<span class="op">.</span><span class="at">style</span><span class="op">.</span><span class="at">opacity</span> <span class="op">=</span> parsedOpacity <span class="op">+</span> <span class="fl">0.1</span></span></code></pre></div>
<ul>
<li class="fragment">die Arbeit mit Werten mit Einheit ist aufwendig, da permanent ein String geparsed oder serialisiert werden muss</li>
</ul>
</section></section>
<section id="css-typed-om---attributestylemap" class="title-slide slide level1">
<h1>CSS Typed OM - attributeStyleMap</h1>
<aside class="notes">
<p>Per <code>attributeStyleMap.set</code> und <code>.get</code> lassen sich Styles setzen und gesetzte Styles auslesen.</p>
</aside>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a>el<span class="op">.</span><span class="at">attributeStyleMap</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;opacity&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="co">// 0.5</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>el<span class="op">.</span><span class="at">attributeStyleMap</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;fontSize&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="co">// 29</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>el<span class="op">.</span><span class="at">attributeStyleMap</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;fontSize&#39;</span>)<span class="op">.</span><span class="at">unit</span> <span class="co">// &#39;px&#39;</span></span></code></pre></div>
<ul>
<li class="fragment"><code>el.attributeStyleMap.get</code> gibt eine <code>CSSUnitValue</code> mit einer <code>value</code> und einer <code>unit</code> zurueck</li>
</ul>
</section>

<section id="css-typed-om-werte-setzen" class="title-slide slide level1">
<h1>CSS Typed OM Werte setzen</h1>
<aside class="notes">
<p>Sinnvoll ist es, <code>el.attributeStyleMap.set</code> auch eine <code>CSSUnitValue</code> zu uebergeben. Eine Erlaeuterung zur <code>CSSUnitValue</code> folgt spaeter.</p>
</aside>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true"></a>footer<span class="op">.</span><span class="at">attributeStyleMap</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;fontSize&#39;</span><span class="op">,</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">29</span>))</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true"></a>footer<span class="op">.</span><span class="at">attributeStyleMap</span><span class="op">.</span><span class="fu">set</span>(<span class="st">&#39;fontSize&#39;</span><span class="op">,</span> <span class="st">&#39;29px&#39;</span>) <span class="co">// Just as valid</span></span></code></pre></div>
</section>

<section id="auf-computed-styles-zugreifen" class="title-slide slide level1">
<h1>Auf Computed Styles zugreifen</h1>
<aside class="notes">
<p>Aequivalent zu <code>window.getComputedStyle(el)</code> kann <code>el.computedStyleMap().get</code> genutzt werden. Hier muss man aber aufpassen: Das Typed OM gibt im Gegensatz zum CSSOM ‘computed’ statt ‘resolved’ Werte zurueck. Das bedeuted genauer, dass das Typed OM zum Beispiel einen Prozentwert fuer eine Breite zurueckgibt, waehrend getComputedStyle den entsprechenden Pixelwert zurueckgibt.</p>
</aside>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true"></a><span class="bu">window</span><span class="op">.</span><span class="fu">getComputedStyle</span>(el)<span class="op">.</span><span class="at">fontSize</span> <span class="co">// old and busted</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true"></a>el<span class="op">.</span><span class="fu">computedStyleMap</span>()<span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;fontSize&#39;</span>) <span class="co">// the new hotness</span></span></code></pre></div>
</section>

<section id="cssstylevalues" class="title-slide slide level1">
<h1>CSSStyleValues</h1>
<ul>
<li class="fragment">Zahlen werden in zwei Arten dargestellt:
<ol type="1">
<li class="fragment"><code>CSSUnitValue</code>: entspricht z.B. “42px”</li>
<li class="fragment"><code>CSSMathValue</code>: entspricht z.B. “calc(56em + 10%)”</li>
</ol></li>
</ul>
</section>

<section>
<section id="cssunitvalues" class="title-slide slide level1">
<h1>CSSUnitValues</h1>
<ul>
<li class="fragment">Um <code>CSSUnitValue</code>s zu erstellen, existieren (unter Anderem) diese Factory-Methoden:</li>
</ul>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">number</span>(<span class="st">&#39;10&#39;</span>)<span class="op">;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true"></a><span class="co">// value === 10, unit === &#39;number&#39;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">42</span>)<span class="op">;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true"></a><span class="co">// value === 42, unit === &#39;px&#39;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">vw</span>(<span class="st">&#39;100&#39;</span>)<span class="op">;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true"></a><span class="co">// value === 100, unit === &#39;vw&#39;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">percent</span>(<span class="st">&#39;10&#39;</span>)<span class="op">;</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true"></a><span class="co">// value === 10, unit === &#39;percent&#39;</span></span></code></pre></div>
</section>
<section id="cssunitvalues---alternativ" class="slide level2">
<h2>CSSUnitValues - Alternativ:</h2>
<ul>
<li class="fragment">alternativ kann der Konstruktor direkt aufgerufen werden</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSUnitValue</span>(<span class="dv">10</span><span class="op">,</span> <span class="st">&#39;number&#39;</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true"></a><span class="co">// value === 10, unit === &#39;number&#39;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSUnitValue</span>(<span class="dv">42</span><span class="op">,</span> <span class="st">&#39;px&#39;</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true"></a><span class="co">// value === 10, unit === &#39;number&#39;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSVWValue</span>(<span class="st">&#39;100&#39;</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true"></a><span class="co">// value === 100, unit === &#39;vw&#39;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true"></a><span class="kw">const</span> {value<span class="op">,</span> unit} <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSPercentValue</span>(<span class="st">&#39;10&#39;</span>)</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true"></a><span class="co">// value === 10, unit === &#39;percent&#39;</span></span></code></pre></div>
</section></section>
<section>
<section id="cssmathvalues" class="title-slide slide level1">
<h1>CSSMathValues</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true"></a><span class="kw">const</span> cssSum <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSMathSum</span>(<span class="bu">CSS</span><span class="op">.</span><span class="fu">vw</span>(<span class="dv">100</span>)<span class="op">,</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="op">-</span><span class="dv">10</span>))</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true"></a>cssSum<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &quot;calc(100vw + -10px)&quot;</span></span></code></pre></div>
<ul>
<li class="fragment">aehnliche Klassen gibt es fuer andere CSS calc Ausdruecke, also <code>CSSMathNegate</code>, <code>CSSMathInvert</code>, <code>CSSMathProduct</code> usw.</li>
</ul>
</section>
<section id="cssmathvalues---nested" class="slide level2">
<h2>CSSMathValues - Nested</h2>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true"></a><span class="kw">const</span> calculation <span class="op">=</span> <span class="kw">new</span> <span class="fu">CSSMathSum</span>(</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">1</span>)<span class="op">,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true"></a>  <span class="kw">new</span> <span class="fu">CSSMathNegate</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true"></a>    <span class="kw">new</span> <span class="fu">CSSMathProduct</span>(<span class="dv">2</span><span class="op">,</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">em</span>(<span class="dv">3</span>))</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true"></a>  )</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true"></a>)</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true"></a>calculation<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &quot;calc(1px - 2 * 3em)&quot;</span></span></code></pre></div>
<ul>
<li class="fragment">calc-Ausdruecke mit mehreren Operatoren lassen sich mit verschachtelten Konstruktoren ausdruecken:</li>
</ul>
</section></section>
<section>
<section id="cssstylevalues---beyond" class="title-slide slide level1">
<h1>CSSStyleValues - Beyond</h1>
<ul>
<li class="fragment">CSSStyleValues unterstuetzen weitere Features<span class="citation" data-cites="mdnCSSTypedObject">(MDN 2019)</span>, wie:</li>
</ul>
</section>
<section id="css-calc-shorthand" class="slide level2">
<h2>CSS calc shorthand</h2>
<aside class="notes">
<p>Anstatt einen CSSMathAdd-Konstruktor zu verwenden, koennen die Funktionsaufrufe auch gechained werden. Praktisch hier ist, dass die Arithmetik zweier gleicher Einheiten automatisch das Ergebnis zurueckgibt, die zweier ungleichen Einheiten jedoch eine Instanz von <code>CSSMathValue</code>.</p>
</aside>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">add</span>(<span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">2</span>)) <span class="co">// { value: 3, unit: &#39;px&#39; }</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">add</span>(<span class="bu">CSS</span><span class="op">.</span><span class="fu">vw</span>(<span class="dv">50</span>))<span class="op">.</span><span class="fu">toString</span>() <span class="co">// &quot;calc(1px + 50vw)&quot;</span></span></code></pre></div>
</section>
<section id="laengeneinheitsumrechnung" class="slide level2">
<h2>Laengeneinheitsumrechnung</h2>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">1</span>)<span class="op">.</span><span class="fu">to</span>(<span class="st">&#39;mm&#39;</span>) <span class="co">// { value: 0.26444, unit: &quot;mm&quot; }</span></span></code></pre></div>
</section>
<section id="gleichheitsberechnung" class="slide level2">
<h2>Gleichheitsberechnung</h2>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true"></a>  <span class="kw">const</span> width <span class="op">=</span> <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">200</span>)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">px</span>(<span class="dv">200</span>)<span class="op">.</span><span class="fu">equals</span>(width) <span class="co">// true</span></span></code></pre></div>
<ul>
<li class="fragment">Positionswerte</li>
<li class="fragment">Transformationswerte</li>
</ul>
</section></section>
<section id="die-property-and-values-api" class="title-slide slide level1">
<h1>Die Property and Values API</h1>
<ul>
<li class="fragment">Im Grunde genommen CSS custom values.</li>
<li class="fragment">Aber mit Typen!</li>
<li class="fragment">Ermöglicht:
<ul>
<li class="fragment">Typisierung</li>
<li class="fragment">Vererbung</li>
<li class="fragment">Initialwert</li>
<li class="fragment">Animationen</li>
</ul></li>
</ul>
</section>

<section id="beispiel" class="title-slide slide level1">
<h1>Beispiel</h1>
<div class="sourceCode" id="cb14"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true"></a>  <span class="fu">.box</span> {</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true"></a>    <span class="va">--color-top</span>: <span class="cn">turquoise</span><span class="op">;</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true"></a>    <span class="va">--color-bottom</span>: <span class="cn">orange</span><span class="op">;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true"></a>    </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true"></a>    <span class="kw">width</span>: <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true"></a>    <span class="kw">height</span>: <span class="dv">250</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true"></a>    </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true"></a>    <span class="kw">background</span>: <span class="fu">linear-gradient(</span>var(--color-top<span class="fu">)</span><span class="op">,</span> <span class="fu">var(</span><span class="va">--color-bottom</span><span class="fu">)</span>)<span class="op">;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true"></a>    </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true"></a>    <span class="kw">transition</span>: <span class="dv">1</span><span class="dt">s</span><span class="op">;</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true"></a>    <span class="kw">transition-property</span>: --color-top<span class="op">,</span> --color-bottom<span class="op">;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true"></a>  }</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true"></a></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true"></a>  <span class="fu">.box</span><span class="in">:hover</span> {</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true"></a>    <span class="va">--color-top</span>: <span class="cn">turquoise</span><span class="op">;</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true"></a>    <span class="va">--color-bottom</span>: <span class="cn">orange</span><span class="op">;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true"></a>  }</span></code></pre></div>
<ul>
<li class="fragment">CSS custom values sind nicht animierbar</li>
</ul>
</section>

<section id="beispiel---versuch-1" class="title-slide slide level1">
<h1>Beispiel - Versuch 1</h1>
<iframe style="width: 512px; height: 512px" src="https://AnimatedGradients-1--tbrpilz.repl.co">
</iframe>
</section>

<section id="beispiel---erweiterung" class="title-slide slide level1">
<h1>Beispiel - Erweiterung</h1>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true"></a>[<span class="st">&#39;--color-top&#39;</span><span class="op">,</span> <span class="st">&#39;--color-bottom&#39;</span>]<span class="op">.</span><span class="fu">forEach</span>((name) <span class="kw">=&gt;</span> {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true"></a>  <span class="bu">CSS</span><span class="op">.</span><span class="fu">registerProperty</span>({</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true"></a>    name<span class="op">,</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true"></a>    <span class="dt">syntax</span><span class="op">:</span> <span class="st">&#39;&lt;color&gt;&#39;</span><span class="op">,</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true"></a>    <span class="dt">inherits</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true"></a>    <span class="dt">initialValue</span><span class="op">:</span> <span class="st">&#39;#c0ffee&#39;</span><span class="op">,</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true"></a>  })</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true"></a>})</span></code></pre></div>
</section>

<section id="beispiel---versuch-2" class="title-slide slide level1">
<h1>Beispiel - Versuch 2</h1>
<iframe style="width: 512px; height: 512px" src="https://AnimatedGradients--tbrpilz.repl.co">
</iframe>
</section>

<section id="css-painting-api" class="title-slide slide level1">
<h1>CSS Painting API</h1>
<ul>
<li class="fragment">Ermöglicht es, die <code>paint()</code> CSS-Funktion zu implementieren</li>
<li class="fragment">Benutzt <code>PaintWorklets</code>, die einen ctx erhalten</li>
<li class="fragment">Bedienung ist deswegen sehr ähnlich zu einem Canvas</li>
</ul>
</section>

<section id="paint-worklet" class="title-slide slide level1">
<h1>Paint Worklet</h1>
<p>Ein Worklet nach der Houdini CSS worklet spec</p>
<p><code>main.js</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true"></a><span class="bu">CSS</span><span class="op">.</span><span class="at">paintWorklet</span><span class="op">.</span><span class="fu">addModule</span>(<span class="st">&#39;my-paint-worklet.js&#39;</span>)</span></code></pre></div>
<p><code>my-paint-worklet.js</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true"></a><span class="kw">class</span> MyPainter {</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true"></a>  <span class="fu">paint</span>(ctx<span class="op">,</span> geometry<span class="op">,</span> properties) {</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true"></a>    <span class="co">// go Pollock</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true"></a>  }</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true"></a>}</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true"></a><span class="fu">registerPaint</span>(<span class="st">&#39;myPainter&#39;</span><span class="op">,</span> MyPainter)</span></code></pre></div>
<p><code>main.css</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true"></a><span class="fu">.box</span> {</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true"></a>  <span class="kw">background-image</span>: paint<span class="fu">(</span><span class="st">&#39;myPainter&#39;</span><span class="fu">)</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true"></a>}</span></code></pre></div>
</section>

<section id="references" class="title-slide slide level1 unnumbered">
<h1 class="unnumbered">References</h1>
<div id="refs" class="references hanging-indent" role="doc-bibliography">
<div id="ref-HoudiniReady">
<p>https://ishoudinireadyyet.com. n.d. “Is Houdini Ready yet?” Accessed October 5, 2020. <a href="https://ishoudinireadyyet.com">https://ishoudinireadyyet.com</a>.</p>
</div>
<div id="ref-mdnCSSTypedObject">
<p>MDN. 2019. “CSS Typed Object Model API.” <em>MDN Web Docs</em>. <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Typed_OM_API">https://developer.mozilla.org/en-US/docs/Web/API/CSS_Typed_OM_API</a>.</p>
</div>
<div id="ref-mdnCSSHoudini">
<p>———. n.d. “CSS Houdini.” <em>MDN Web Docs</em>. Accessed October 5, 2020. <a href="https://developer.mozilla.org/en-US/docs/Web/Houdini">https://developer.mozilla.org/en-US/docs/Web/Houdini</a>.</p>
</div>
<div id="ref-mdnCSSObjectModel">
<p>MDN, Mozilla. 2020. “CSS Object Model (CSSOM).” <em>MDN Web Docs</em>. <a href="https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model">https://developer.mozilla.org/en-US/docs/Web/API/CSS_Object_Model</a>.</p>
</div>
</div>
</section>
    </div>
  </div>

  <script src="https://unpkg.com/reveal.js@4.0.2/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="https://unpkg.com/reveal.js@4.0.2/plugin/notes/notes.js"></script>
  <script src="https://unpkg.com/reveal.js@4.0.2/plugin/search/search.js"></script>
  <script src="https://unpkg.com/reveal.js@4.0.2/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: false,
        // Transition style
        transition: 'none', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1920,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
